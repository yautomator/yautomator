import{e as H,u as M,b as D,I as F,ab as g,t as v,c as I,x as S,r as j}from"./BUypM0US.js";import{i as C,a as N,b as O,c as R}from"./yVaHOijw.js";import{t as E,a as x}from"./DFTka6-O.js";import{s as U,c as L,r as q}from"./Bn_i0IBy.js";import{r as P}from"./ww0JMF8G.js";function Y(a,n,o){H(()=>{var e=M(()=>n(a,o==null?void 0:o())||{});if(o&&(e!=null&&e.update)){var t=!1,s={};D(()=>{var i=o();F(i),t&&g(s,i)&&(s=i,e.update(i))}),t=!0}if(e!=null&&e.destroy)return()=>e.destroy()})}function z(a){const n=JSON.parse(a);return n.data&&(n.data=O(n.data,R.decoders)),n}function p(a){return HTMLElement.prototype.cloneNode.call(a)}function Z(a,n=()=>{}){const o=async({action:t,result:s,reset:i=!0,invalidateAll:c=!0})=>{s.type==="success"&&(i&&HTMLFormElement.prototype.reset.call(a),c&&await C()),(location.origin+location.pathname===t.origin+t.pathname||s.type==="redirect"||s.type==="error")&&await N(s)};async function e(t){var b,y,h,w,A;if(((b=t.submitter)!=null&&b.hasAttribute("formmethod")?t.submitter.formMethod:p(a).method)!=="post")return;t.preventDefault();const i=new URL((y=t.submitter)!=null&&y.hasAttribute("formaction")?t.submitter.formAction:p(a).action),c=(h=t.submitter)!=null&&h.hasAttribute("formenctype")?t.submitter.formEnctype:p(a).enctype,u=new FormData(a),m=(w=t.submitter)==null?void 0:w.getAttribute("name");m&&u.append(m,((A=t.submitter)==null?void 0:A.getAttribute("value"))??"");const d=new AbortController;let f=!1;const T=await n({action:i,cancel:()=>f=!0,controller:d,formData:u,formElement:a,submitter:t.submitter})??o;if(f)return;let l;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});c!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(c)?c:"application/x-www-form-urlencoded");const k=c==="multipart/form-data"?u:new URLSearchParams(u),$=await fetch(i,{method:"POST",headers:r,cache:"no-store",body:k,signal:d.signal});l=z(await $.text()),l.type==="error"&&(l.status=$.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;l={type:"error",error:r}}await T({action:i,formData:u,formElement:a,update:r=>o({action:i,result:l,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",e),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",e)}}}var B=E("<button><!></button>");function _(a,n){let o=P(n,["$$slots","$$events","$$legacy","children"]);var e=B();let t;var s=I(e);U(s,()=>n.children??S),j(e),v(()=>t=L(e,t,{...o},"svelte-ldtjip")),x(a,e)}var J=E("<input>");function tt(a,n){let o=P(n,["$$slots","$$events","$$legacy"]);var e=J();q(e);let t;v(()=>t=L(e,t,{type:"text",...o},"svelte-1gd8b2m")),x(a,e)}export{tt as I,_ as P,Y as a,Z as e};
