import{e as H,u as M,b as D,L as F,av as g,t as $,c as S,z as j,r as z}from"./DPa9U1Vh.js";import{i as C,c as I,d as N,e as O}from"./BeX4TqfZ.js";import{t as E,a as L}from"./3FD4uSek.js";import{s as R}from"./2Vc85SlI.js";import{b as x,r as U}from"./tqzrrQtv.js";import{r as P}from"./B64zA8Al.js";function Z(a,o,i){H(()=>{var e=M(()=>o(a,i==null?void 0:i())||{});if(i&&(e!=null&&e.update)){var t=!1,s={};D(()=>{var n=i();F(n),t&&g(s,n)&&(s=n,e.update(n))}),t=!0}if(e!=null&&e.destroy)return()=>e.destroy()})}function q(a){const o=JSON.parse(a);return o.data&&(o.data=N(o.data,O.decoders)),o}function p(a){return HTMLElement.prototype.cloneNode.call(a)}function _(a,o=()=>{}){const i=async({action:t,result:s,reset:n=!0,invalidateAll:c=!0})=>{s.type==="success"&&(n&&HTMLFormElement.prototype.reset.call(a),c&&await C()),(location.origin+location.pathname===t.origin+t.pathname||s.type==="redirect"||s.type==="error")&&await I(s)};async function e(t){var b,y,h,w,A;if(((b=t.submitter)!=null&&b.hasAttribute("formmethod")?t.submitter.formMethod:p(a).method)!=="post")return;t.preventDefault();const n=new URL((y=t.submitter)!=null&&y.hasAttribute("formaction")?t.submitter.formAction:p(a).action),c=(h=t.submitter)!=null&&h.hasAttribute("formenctype")?t.submitter.formEnctype:p(a).enctype,u=new FormData(a),m=(w=t.submitter)==null?void 0:w.getAttribute("name");m&&u.append(m,((A=t.submitter)==null?void 0:A.getAttribute("value"))??"");const d=new AbortController;let f=!1;const T=await o({action:n,cancel:()=>f=!0,controller:d,formData:u,formElement:a,submitter:t.submitter})??i;if(f)return;let l;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});c!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(c)?c:"application/x-www-form-urlencoded");const k=c==="multipart/form-data"?u:new URLSearchParams(u),v=await fetch(n,{method:"POST",headers:r,cache:"no-store",body:k,signal:d.signal});l=q(await v.text()),l.type==="error"&&(l.status=v.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;l={type:"error",error:r}}await T({action:n,formData:u,formElement:a,update:r=>i({action:n,result:l,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",e),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",e)}}}var B=E("<button><!></button>");function tt(a,o){let i=P(o,["$$slots","$$events","$$legacy","children"]);var e=B();let t;var s=S(e);R(s,()=>o.children??j),z(e),$(()=>t=x(e,t,{...i},"svelte-ldtjip")),L(a,e)}var J=E("<input>");function et(a,o){let i=P(o,["$$slots","$$events","$$legacy"]);var e=J();U(e);let t;$(()=>t=x(e,t,{type:"text",...i},"svelte-1gd8b2m")),L(a,e)}export{et as I,tt as P,Z as a,_ as e};
